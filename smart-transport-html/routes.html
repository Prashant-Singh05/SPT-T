<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Routes - Smart Transport</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-container">
                <a href="index.html" class="logo">
                    üöå Smart Transport
                </a>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="routes.html" class="active">Routes</a></li>
                    <li><a href="schedules.html">Schedules</a></li>
                    <li><a href="tickets.html">Tickets</a></li>
                    <li><a href="admin.html">Admin</a></li>
                    <li><a href="login.html">Login</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="section">
        <div class="container">
            <div class="text-center mb-5">
                <h1>Transportation Routes</h1>
                <p>Explore all available routes and find your perfect journey</p>
            </div>

            <!-- Search and Filters -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="grid grid-2">
                        <div>
                            <label class="form-label">Search Routes</label>
                            <input type="text" class="form-input" id="route-search" placeholder="Search by route name, start point, or end point...">
                        </div>
                        <div>
                            <label class="form-label">Filter by Type</label>
                            <select class="form-select" id="type-filter">
                                <option value="">All Types</option>
                                <option value="bus">Bus</option>
                                <option value="metro">Metro</option>
                                <option value="tram">Tram</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-2 mt-3">
                        <div>
                            <label class="form-label">Filter by Status</label>
                            <select class="form-select" id="status-filter">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                        <div class="flex items-center">
                            <button class="btn btn-secondary" onclick="clearFilters()">Clear Filters</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Count -->
            <div class="mb-4">
                <p id="results-count">Loading routes...</p>
            </div>

            <!-- Routes Grid -->
            <div class="grid grid-2" id="routes-container">
                <!-- Routes will be loaded dynamically -->
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>

            <!-- No Results Message -->
            <div id="no-results" class="hidden text-center mt-5">
                <div class="card">
                    <div class="card-body">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>
                        <h3>No routes found</h3>
                        <p>Try adjusting your search criteria</p>
                        <button class="btn btn-primary mt-3" onclick="clearFilters()">Clear Filters</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div>
                    <h3>Smart Transport</h3>
                    <p>Your reliable partner for smart public transportation.</p>
                </div>
                <div>
                    <h3>Quick Links</h3>
                    <ul style="list-style: none;">
                        <li><a href="routes.html">Routes</a></li>
                        <li><a href="schedules.html">Schedule</a></li>
                        <li><a href="tickets.html">Tickets</a></li>
                        <li><a href="admin.html">Admin</a></li>
                    </ul>
                </div>
                <div>
                    <h3>Contact Info</h3>
                    <p>üìç 123 Transport St, City, State 12345</p>
                    <p>üìû +1 (555) 123-4567</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Smart Transport. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script>
        // Clear all filters
        function clearFilters() {
            document.getElementById('route-search').value = '';
            document.getElementById('type-filter').value = '';
            document.getElementById('status-filter').value = '';
            filterRoutes();
        }

        // Update results count
        function updateResultsCount(count) {
            const resultsElement = document.getElementById('results-count');
            if (resultsElement) {
                resultsElement.textContent = `Showing ${count} routes`;
            }
        }

        // Show/hide no results message
        function toggleNoResults(show) {
            const noResults = document.getElementById('no-results');
            const routesContainer = document.getElementById('routes-container');
            
            if (show) {
                noResults.classList.remove('hidden');
                routesContainer.style.display = 'none';
            } else {
                noResults.classList.add('hidden');
                routesContainer.style.display = 'grid';
            }
        }

        // Override the filterRoutes function to include results count
        const originalFilterRoutes = window.filterRoutes;
        window.filterRoutes = function() {
            const searchTerm = document.getElementById('route-search')?.value.toLowerCase() || '';
            const typeFilter = document.getElementById('type-filter')?.value || '';
            const statusFilter = document.getElementById('status-filter')?.value || '';
            
            const filteredRoutes = routesData.filter(route => {
                const matchesSearch = route.name.toLowerCase().includes(searchTerm) ||
                                     route.startPoint.toLowerCase().includes(searchTerm) ||
                                     route.endPoint.toLowerCase().includes(searchTerm);
                const matchesType = !typeFilter || route.type === typeFilter;
                const matchesStatus = !statusFilter || (statusFilter === 'active' ? route.isActive : !route.isActive);
                
                return matchesSearch && matchesType && matchesStatus;
            });
            
            const container = document.getElementById('routes-container');
            if (container) {
                if (filteredRoutes.length === 0) {
                    toggleNoResults(true);
                    updateResultsCount(0);
                } else {
                    toggleNoResults(false);
                    container.innerHTML = filteredRoutes.map(route => createRouteCard(route, true)).join('');
                    updateResultsCount(filteredRoutes.length);
                }
            }
        };

        // Handle URL search parameter
        window.addEventListener('load', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const searchTerm = urlParams.get('search');
            if (searchTerm) {
                document.getElementById('route-search').value = searchTerm;
                filterRoutes();
            }
        });
    </script>
</body>
</html>
